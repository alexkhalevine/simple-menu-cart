(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{147:function(e,a,t){e.exports=t(291)},153:function(e,a,t){},172:function(e,a,t){},287:function(e,a,t){},288:function(e,a,t){},289:function(e,a,t){},290:function(e,a,t){},291:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(20),l=t.n(r),o=(t(152),t(153),t(29)),i=t.n(o),s=t(52),u=t(8),d=t(54),m=t.n(d),h=Object(n.createContext)(),p=function(){return Object(n.useContext)(h)},b=function(e){var a=e.initialState,t=e.reducer,r=e.children;return c.a.createElement(h.Provider,{value:Object(n.useReducer)(t,a)},r)},v=(t(172),[{key:"fit",text:"fit",value:"fit"},{key:"good",text:"good",value:"good"},{key:"healthy",text:"healthy",value:"healthy"},{key:"tasty",text:"tasty",value:"tasty"}]),y=[{key:"1",text:"soups and starters",value:"1"},{key:"2",text:"main dishes",value:"2"},{key:"3",text:"desserts",value:"3"}],f=t(9),O=t(2),g=t(297),E=function(e){var a=e.name,t=e.type,n=e.value,r=e.onChange,l=e.onBlur,o=e.isArea,i=e.isDropdown,s=e.dropdownOptions;return o?c.a.createElement("fieldset",null,c.a.createElement("label",{htmlFor:a},a),c.a.createElement("textarea",{cols:"30",rows:"2",className:a,placeholder:a,id:a,name:a,type:"text",value:n,onChange:r,onBlur:l})):i?c.a.createElement("fieldset",null,c.a.createElement("label",{htmlFor:a},a),c.a.createElement(g.a,{id:a,name:a,floating:!0,defaultValue:n,options:s,onChange:r})):c.a.createElement("fieldset",null,c.a.createElement("label",{htmlFor:a},a),c.a.createElement("input",{className:a,name:a,type:t,value:n,onChange:r,onBlur:l}))},j=(t(287),function(e){var a=e.data,t=e.index,r=e.dayName,l=p(),o=Object(u.a)(l,2),i=(o[0],o[1]),s=Object(n.useState)({dishName:a.dishName,tag:a.tag,allergens:a.allergens,price:a.price,category:a.category}),d=Object(u.a)(s,2),m=d[0],h=d[1],b=function(e,a){h(Object(O.a)(Object(O.a)({},m),{},Object(f.a)({},e.target.name,e.target.value)))},g=function(e){i({type:"editDish",dishContent:m,dayName:r,index:t})};return c.a.createElement("article",{className:"dish"},c.a.createElement(E,{name:"dishName",type:"text",value:m.dishName,onChange:b,onBlur:g,isArea:!0}),c.a.createElement(E,{name:"category",value:m.category,onChange:function(e,a){i({type:"editDish",dishContent:Object(O.a)(Object(O.a)({},m),{},{category:a.value}),dayName:r,index:t})},dropdownOptions:y,isDropdown:!0}),c.a.createElement(E,{name:"tag",value:m.tag,onChange:function(e,a){i({type:"editDish",dishContent:Object(O.a)(Object(O.a)({},m),{},{tag:a.value}),dayName:r,index:t})},dropdownOptions:v,isDropdown:!0}),c.a.createElement(E,{name:"allergens",type:"text",value:m.allergens,onChange:b,onBlur:g}),c.a.createElement(E,{name:"price",type:"number",value:m.price,onChange:b,onBlur:g}),c.a.createElement("button",{className:"btn-remove",onClick:function(){i({type:"removeDish",dayName:r,index:t})}},"x"))}),N=(t(288),function(e){var a=e.dayName,t={dishName:"",tag:"fit",allergens:"",category:"1"},r=p(),l=Object(u.a)(r,2),o=(l[0],l[1]),i=Object(n.useState)(t),s=Object(u.a)(i,2),d=s[0],m=s[1],h=function(e){m(Object(O.a)(Object(O.a)({},d),{},Object(f.a)({},e.target.name,e.target.value)))};return c.a.createElement("section",{className:"newDishWrapper"},c.a.createElement("h3",null,"Add new dish"),c.a.createElement("article",{className:"newDish"},c.a.createElement(E,{name:"dishName",type:"text",value:d.dishName,onChange:h,isArea:!0}),c.a.createElement(E,{name:"category",value:d.category,onChange:function(e,a){m(Object(O.a)(Object(O.a)({},d),{},{category:a.value}))},dropdownOptions:y,isDropdown:!0}),c.a.createElement(E,{name:"tag",value:d.tag,onChange:function(e,a){m(Object(O.a)(Object(O.a)({},d),{},{tag:a.value}))},dropdownOptions:v,isDropdown:!0}),c.a.createElement(E,{name:"allergens",type:"text",value:d.allergens,onChange:h}),c.a.createElement(E,{name:"price",type:"number",value:d.price,onChange:h}),c.a.createElement("button",{className:"btn-add",onClick:function(){o({type:"addDish",dishContent:d,dayName:a}),m(t)}},"+")))}),w=(t(289),function(e){var a=e.name,t=e.open,r=e.dishes,l=p(),o=Object(u.a)(l,2),i=o[0],s=o[1],d=Object(n.useState)(t),m=Object(u.a)(d,2),h=m[0],b=m[1];return c.a.createElement("section",{className:"day"},c.a.createElement("header",null,c.a.createElement("h2",null,a," ",c.a.createElement("small",null,h?"(open)":"(closed)")),c.a.createElement("label",{className:"switch"},c.a.createElement("input",{type:"checkbox",defaultChecked:h,onChange:function(){return b(!h),void setTimeout((function(){s({type:"updateOpen",open:!h,dayName:a})}),100)}}),c.a.createElement("span",{className:"slider round"}))),y.map((function(e,t){var n=function(e){return r.map((function(t,n){var r=t.dishName;if(t.category==e)return c.a.createElement(j,{key:"".concat(r,"_").concat(n),index:n,data:t,dayName:a})}))}(t+1);if(n.length>0)return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,e.text),n)})),c.a.createElement(N,{dayName:a}),c.a.createElement("button",{className:"btn",onClick:function(){s({type:"saveDish",days:i})}},"save"))}),x=(t(290),function(){var e=p(),a=Object(u.a)(e,2),t=a[0];a[1];return c.a.createElement("div",{className:"days"},Object.keys(t).map((function(e,a){var n=t[e],r=n.open,l=n.dishes;return c.a.createElement(w,{key:"".concat(e,"_").concat(a),name:e,open:r,dishes:l})})))}),C=t(80),k=function(){var e=Object(s.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("http://dev.suche-transport.at/write",a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("... could not write data, failed with ".concat(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(a){return e.apply(this,arguments)}}(),D=function(e,a){switch(a.type){case"addDish":return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},a.dayName,Object(O.a)(Object(O.a)({},e[a.dayName]),{},{dishes:[].concat(Object(C.a)(e[a.dayName].dishes),[a.dishContent])})));case"removeDish":var t=Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},a.dayName,Object(O.a)(Object(O.a)({},e[a.dayName]),{},{dishes:Object(C.a)(e[a.dayName].dishes.filter((function(e,t){if(t!=a.index)return e})))})));return k(t),t;case"editDish":return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},a.dayName,Object(O.a)(Object(O.a)({},e[a.dayName]),{},{dishes:Object.assign([],e[a.dayName].dishes,Object(f.a)({},a.index,a.dishContent))})));case"saveDish":return k(e),Object(O.a)({},e);case"updateOpen":return console.log("state: ",a.open),Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},a.dayName,Object(O.a)(Object(O.a)({},e[a.dayName]),{},{open:a.open})));default:return e}},B=function(e){var a=Object(n.useState)(),t=Object(u.a)(a,2),r=t[0],l=t[1],o=function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()("data.json");case 3:a=e.sent,l(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("... could not load data, failed with ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),c.a.createElement(c.a.Fragment,null,r?c.a.createElement(b,{initialState:r,reducer:D},c.a.createElement("div",{className:"admin-container"},c.a.createElement("header",{className:"admin-header"},c.a.createElement("h1",null,"Menu Editor"),c.a.createElement("a",{href:"http://dev.suche-transport.at/preview",target:"blank",className:"btn-preview"},"preview")),c.a.createElement(x,null))):c.a.createElement("div",{className:"preloader"},c.a.createElement("div",{className:"lds-roller"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[147,1,2]]]);
//# sourceMappingURL=main.21465008.chunk.js.map